!function (e) { e.googleTagManger = { init: function (e) { config = window.GTM_Config, "undefined" != typeof config && this[e] && this[e].init && this[e].init(config) }, cart: { init: function (t) { let n = [], o = []; var i = $(".project-name a "); if (null != i && i.length > 0) { for (let e = 0; e < i.length; e++) { let t = { list: "Project Items", name: i[e].innerText }; o.push(t) } o && o.length > 0 && sessionStorage.setItem("items", JSON.stringify(o)), e.push({ event: "beginCart", ecommerce: { products: o } }) } var c = $("#cart-table .item-details .name"); if (null != c && c.length > 0) for (let e = 0; e < c.length; e++) { let t = { name: c[e].innerText }; n.push(t) } $(".cart-track").on("click", (function (t) { e.push({ event: "ViewCart", ecommerce: { products: n } }) })), $(".RemoveAllItems").on("click", (function (t) { let n = this.href.split("pid=")[1]; e.push({ event: "removeAll", ecommerce: { products: [{ id: n }] } }) })), $('button[name$="deleteProduct"]').on("click", (function (t) { e.push({ event: "removeFromCart", ecommerce: { remove: { products: [{ name: $(".item-details .name").text().trim(), id: $(".item-details .sku .value").text().trim() }] } } }) })), $(".checkout-dialogue-customer").on("click", (function (t) { null != i && i.length > 0 ? e.push({ event: "beginCheckout", ecommerce: { checkout: { actionField: { step: "1", option: "Begin checkout" }, products: o } } }) : e.push({ event: "beginCheckout", ecommerce: { checkout: { actionField: { step: "1", option: "Begin checkout" }, products: n } } }) })), $('button[name$="_cart_checkoutCart"]').on("click", (function (t) { null != i && i.length > 0 ? e.push({ event: "beginCheckout", ecommerce: { checkout: { actionField: { step: "1", option: "Begin checkout" }, products: o } } }) : e.push({ event: "beginCheckout", ecommerce: { checkout: { actionField: { step: "1", option: "Begin checkout" }, products: n } } }) })), $('button[name$="_cart_emailToCart"]').on("click", (function (t) { e.push({ event: "emailToCart", ecommerce: { event_label: "Submitted Email to Cart", event_category: "Email to Cart" } }) })) } }, search: { init: function (t) { t.searchQuery && e.push({ event: "search", ecommerce: { search_term: t.searchQuery } }), t.categoryID && e.push({ event: "search", ecommerce: { search_term: t.categoryID } }), $("#main").on("click", ".refinements a", (function (t) { e.push({ event: "search", ecommerce: { search_term: t.target.title } }) })), $("#main").on("click", "#compare-items-button", (function () { e.push({ event: "select_content", ecommerce: { event_label: "Compare Items", event_category: "Item Compare" } }) })) } }, product: { init: function (t) { var n = $("#pdpMain"), o = ($("#carousel-recomendations"), $("[itemprop=name]")); $("[itemprop=name]").text().length > 0 && e.push({ event: "productClick", ecommerce: { click: { actionField: { list: "Search Results" }, products: [{ name: o[0].innerText, id: null != $("#pid").val() && void 0 !== $("#pid").val() ? $("#pid").val() : $("[itemprop=prj_id]").text() }] } } }), sessionStorage.setItem("projectid", $("[itemprop=prj_id]").text()), n.on("click", "#add-to-cart", (function (t) { var n = $("[itemprop=name]"); e.push({ event: "addToCart", ecommerce: { add: { products: [{ name: n[0].innerText, id: $("#pid").val() }] } } }) })), n.on("click", "#add-all-ingredients-to-cart", (function (t) { e.push({ event: "addAllIngredientsToCart", ecommerce: { add: { products: [{ name: o[0].innerText, id: $("[itemprop=prj_id]").text() }] } } }) })), n.on("click", "#add-all-tools-to-cart", (function (t) { e.push({ event: "addAllToolsToCart", ecommerce: { add: { products: [{ name: o[0].innerText, id: $("[itemprop=prj_id]").text() }] } } }) })), n.on("click", "#add-all-to-cart,#add-project-to-cart", (function (t) { e.push({ event: "addAllToCart", ecommerce: { add: { products: [{ name: o[0].innerText, id: $("[itemprop=prj_id]").text() }] } } }) })), $(".add-to-cart").on("click", (function (t) { t.stopPropagation(); var n = $("[itemprop=name]"); e.push({ event: "addToCart", ecommerce: { add: { products: [{ name: n[0].innerText, id: $("[itemprop=prj_id]").text() }] } } }) })) } }, orderconfirmation: { init: function (t) { for (var n = t.order, o = [], i = 0; i < n.products.length; i++) { var c = n.products[i], r = { id: c.ID, name: c.name, category: c.category, quantity: c.quantity, price: c.price, dimension2: c.projectId }; o.push(r) } e.push({ ecommerce: { purchase: { actionField: { id: n.orderNo, affiliation: n.storeName, revenue: n.adjustedMerchandizeTotalNetPrice, tax: n.totalTax, shipping: n.adjustedShippingTotalNetPrice }, products: o } } }), sessionStorage.clear() } }, checkout: { init: function (t) { $('button[name$="shippingAddress_save"]').on("click", (function (t) { e.push({ event: "shippingAddressSaved", ecommerce: { checkout_option: { actionField: { step: "2", option: "Shipping address saved" } } } }) })), $('button[name$="shippingMethod_shippingsave"]').on("click", (function (t) { e.push({ event: "shippingMethodsSaved", ecommerce: { checkout_option: { actionField: { step: "3", option: "Shipping methods saved" } } } }) })), $('button[name$="billing_save"]').on("click", (function (t) { e.push({ event: "billingSaved", ecommerce: { checkout_option: { actionField: { step: "4", option: "Billing saved" } } } }) })), $('button[name$="submit"]').on("click", (function (t) { e.push({ event: "orderSubmitted", ecommerce: { checkout_option: { actionField: { step: "5", option: "Submitted order" } } } }) })) } } } }(window.dataLayer = window.dataLayer || {});